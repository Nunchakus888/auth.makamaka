"use strict";(self.webpackChunkauth_makamaka_io=self.webpackChunkauth_makamaka_io||[]).push([[417],{4904:function(e,r,t){t(3197);var n=t(3701),i=t(4554),s=t(6630),o=t(184);r.Z=e=>{const r=s.Z.logo,t=s.Z.logoWidth;return(0,o.jsx)(n.Z,{disabled:!0,children:(0,o.jsx)(i.Z,{sx:{display:"flex",gap:"5px",alignItems:"center"},children:(0,o.jsx)("img",{src:r,alt:"logo",style:{width:t}})})})}},5876:function(e,r,t){t.d(r,{Z:function(){return $}});var n=t(4554),i=t(2791),s=t(3967),o=t(2793),a=t(1048),l=t(8182),d=t(4419),c=t(7630),u=t(3736),m=t(703),h=t(1217),x=t(9407);function p(e){return(0,h.Z)("MuiCard",e)}(0,x.Z)("MuiCard",["root"]);var g=t(184);const Z=["className","raised"],j=(0,c.ZP)(m.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({overflow:"hidden"})));var v=i.forwardRef((function(e,r){const t=(0,u.Z)({props:e,name:"MuiCard"}),{className:n,raised:i=!1}=t,s=(0,a.Z)(t,Z),c=(0,o.Z)({},t,{raised:i}),m=(e=>{const{classes:r}=e;return(0,d.Z)({root:["root"]},p,r)})(c);return(0,g.jsx)(j,(0,o.Z)({className:(0,l.Z)(m.root,n),elevation:i?8:void 0,ref:r,ownerState:c},s))})),y=t(890);function f(e){return(0,h.Z)("MuiCardHeader",e)}var b=(0,x.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);const C=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],w=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,r)=>(0,o.Z)({[`& .${b.title}`]:r.title,[`& .${b.subheader}`]:r.subheader},r.root)})({display:"flex",alignItems:"center",padding:16}),_=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,r)=>r.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),P=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,r)=>r.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),R=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,r)=>r.content})({flex:"1 1 auto"});var k=i.forwardRef((function(e,r){const t=(0,u.Z)({props:e,name:"MuiCardHeader"}),{action:n,avatar:i,className:s,component:c="div",disableTypography:m=!1,subheader:h,subheaderTypographyProps:x,title:p,titleTypographyProps:Z}=t,j=(0,a.Z)(t,C),v=(0,o.Z)({},t,{component:c,disableTypography:m}),b=(e=>{const{classes:r}=e;return(0,d.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},f,r)})(v);let k=p;null==k||k.type===y.Z||m||(k=(0,g.jsx)(y.Z,(0,o.Z)({variant:i?"body2":"h5",className:b.title,component:"span",display:"block"},Z,{children:k})));let S=h;return null==S||S.type===y.Z||m||(S=(0,g.jsx)(y.Z,(0,o.Z)({variant:i?"body2":"body1",className:b.subheader,color:"text.secondary",component:"span",display:"block"},x,{children:S}))),(0,g.jsxs)(w,(0,o.Z)({className:(0,l.Z)(b.root,s),as:c,ref:r,ownerState:v},j,{children:[i&&(0,g.jsx)(_,{className:b.avatar,ownerState:v,children:i}),(0,g.jsxs)(R,{className:b.content,ownerState:v,children:[k,S]}),n&&(0,g.jsx)(P,{className:b.action,ownerState:v,children:n})]}))})),S=t(7924);function M(e){return(0,h.Z)("MuiCardContent",e)}(0,x.Z)("MuiCardContent",["root"]);const N=["className","component"],I=(0,c.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}})));var H=i.forwardRef((function(e,r){const t=(0,u.Z)({props:e,name:"MuiCardContent"}),{className:n,component:i="div"}=t,s=(0,a.Z)(t,N),c=(0,o.Z)({},t,{component:i}),m=(e=>{const{classes:r}=e;return(0,d.Z)({root:["root"]},M,r)})(c);return(0,g.jsx)(I,(0,o.Z)({as:i,className:(0,l.Z)(m.root,n),ownerState:c,ref:r},s))}));const K={"& .MuiCardHeader-action":{mr:0}};var B=(0,i.forwardRef)(((e,r)=>{let{border:t=!0,boxShadow:n,children:i,content:o=!0,contentClass:a="",contentSX:l={},darkTitle:d,secondary:c,shadow:u,sx:m={},title:h,...x}=e;const p=(0,s.Z)();return(0,g.jsxs)(v,{ref:r,...x,sx:{border:t?"1px solid":"none",borderColor:p.palette.primary[200]+75,":hover":{boxShadow:n?u||"0 2px 14px 0 rgb(32 40 45 / 8%)":"inherit"},backgroundColor:"#E5E2FF",...m,".MuiCardContent-root:last-child":{paddingBottom:"12px"}},children:[!d&&h&&(0,g.jsx)(k,{sx:K,title:h,action:c}),d&&h&&(0,g.jsx)(k,{sx:K,title:(0,g.jsx)(y.Z,{variant:"h3",children:h}),action:c}),h&&(0,g.jsx)(S.Z,{}),o&&(0,g.jsx)(H,{sx:l,className:a,children:i}),!o&&i]})}));var $=e=>{let{children:r,...t}=e;return(0,g.jsx)(B,{sx:{maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1,...t,children:(0,g.jsx)(n.Z,{sx:{p:{xs:2,sm:3,xl:5}},children:r})})}},2828:function(e,r,t){const n=(0,t(7630).ZP)("div")((e=>{let{theme:r}=e;return{backgroundColor:r.palette.primary.light,minHeight:"100vh"}}));r.Z=n},1417:function(e,r,t){t.r(r),t.d(r,{default:function(){return W}});var n=t(3504),i=t(3967),s=t(5193),o=t(1889),a=t(3767),l=t(890),d=t(7924),c=t(2828),u=t(5876),m=t(2791),h=t(9434),x=t(6151),p=t(4554),g=t(8096),Z=t(4925),j=t(635),v=t(7071),y=t(3466),f=t(3400),b=t(1724),C=t(5705),w=t(5878),_=t(752),P=t(7525),R=t(3746),k=t(165),S=t(4387),M=t(5103),N=t(8395),I=t(1731),H=t(6630),K=t(6513),B=t(9021);var $=[/https?:\/\/(www|dev|test|stage|preview|miaohua)?\.?(remagi|revivai|sensetime)\.(com|io|ai)/,/https?:\/\/[a-zA-Z0-9-]+\.miaohua\.sensetime\.com/,/https?:\/\/(local|local\.miaohua|local-miaohua)\.(remagi|revivai|sensetime)\.(com|io|ai)(:[\d]{2,5})?/],T=t(184);var z=e=>{let{...r}=e;const t=(0,i.Z)(),c=(0,w.Z)(),u=(0,s.Z)(t.breakpoints.down("md")),z=(0,h.v9)((e=>e.customization)),[E,W]=(0,m.useState)(!0),U=(0,I.Z)(),[D,F]=(0,m.useState)((()=>decodeURIComponent(new URLSearchParams(location.search).get("redirect")||"")||H.Z.defaultRedirect));(0,m.useEffect)((()=>{A(D)}),[D]);const A=e=>{if(e){if(!$.some((r=>r.test(e))))return U("Redirect url is not allowed",{variant:"error",autoHideDuration:2e3}),F(""),!0;document.cookie=`_next_url=${e}; expires=0; domain=${H.Z.cookieDomain}; path=/`}},G=e=>{window.location.href=`${H.Z.loginURL}/${e}?redirect=${encodeURIComponent(D)}`},[q,L]=(0,m.useState)(!1),V=()=>{L(!q)},J=e=>{e.preventDefault()};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(o.ZP,{container:!0,direction:"column",justifyContent:"center",spacing:2,children:["miaohua"!==H.C&&(0,T.jsxs)(m.Fragment,{children:[(0,T.jsxs)(o.ZP,{item:!0,xs:12,children:[(0,T.jsx)(_.Z,{children:(0,T.jsxs)(x.Z,{disableElevation:!0,fullWidth:!0,onClick:()=>G("google"),size:"large",variant:"outlined",sx:{color:"grey.700",backgroundColor:t.palette.grey[50],borderColor:t.palette.grey[100]},children:[(0,T.jsx)(p.Z,{sx:{mr:{xs:1,sm:2,width:20}},children:(0,T.jsx)("img",{src:S.Z,alt:"google",width:16,height:16,style:{marginRight:u?8:16}})}),(0,T.jsx)(K.cC,{i18nKey:"user.login_google",children:B.Z.user.register_google})]})}),(0,T.jsx)(_.Z,{children:(0,T.jsxs)(x.Z,{disableElevation:!0,fullWidth:!0,onClick:()=>G("discord"),size:"large",variant:"outlined",sx:{color:"grey.700",backgroundColor:t.palette.grey[50],borderColor:t.palette.grey[100],mt:2},children:[(0,T.jsx)(p.Z,{sx:{mr:{xs:1,sm:2,width:20}},children:(0,T.jsx)("img",{src:M.Z,alt:"discord",width:16,height:16,style:{marginRight:u?8:16}})}),(0,T.jsx)(K.cC,{i18nKey:"user.login_discord",children:B.Z.user.register_discord})]})})]}),(0,T.jsx)(o.ZP,{item:!0,xs:12,children:(0,T.jsxs)(p.Z,{sx:{alignItems:"center",display:"flex"},children:[(0,T.jsx)(d.Z,{sx:{flexGrow:1},orientation:"horizontal"}),(0,T.jsx)(x.Z,{variant:"outlined",sx:{cursor:"unset",m:2,py:.5,px:7,borderColor:`${t.palette.grey[100]} !important`,color:`${t.palette.grey[900]}!important`,fontWeight:500,borderRadius:`${z.borderRadius}px`},disableRipple:!0,disabled:!0,children:(0,T.jsx)(K.cC,{i18nKey:"user.register_or",children:B.Z.user.register_or})}),(0,T.jsx)(d.Z,{sx:{flexGrow:1},orientation:"horizontal"})]})})]}),(0,T.jsx)(o.ZP,{item:!0,xs:12,container:!0,alignItems:"center",justifyContent:"center",children:(0,T.jsx)(p.Z,{sx:{mb:2},children:(0,T.jsx)(l.Z,{variant:"subtitle1",children:(0,T.jsx)(K.cC,{i18nKey:"user.login_tips2",children:B.Z.user.register_tips2})})})})]},P.Z.location.key),(0,T.jsx)(C.J9,{initialValues:{email:"",password:"",remember:!0,submit:null},validationSchema:b.Ry().shape({email:b.Z_().max(255).required((0,T.jsx)(K.cC,{i18nKey:"user.login_username_error",children:B.Z.user.login_username_error})),password:b.Z_().max(255).required((0,T.jsx)(K.cC,{i18nKey:"user.login_password_error",children:B.Z.user.login_password_error}))}),onSubmit:async(e,r)=>{let{setErrors:t,setStatus:n,setSubmitting:i}=r;const{email:s,password:o}=e,{code:a,msg:l}=await N.x4(s,o,E).catch((e=>e));0===a?!A(D)&&location.replace(D):U(l||N.c9,{variant:"error"}),c.current&&(n({success:!0}),i(!1))},children:e=>{let{errors:i,handleBlur:s,handleChange:o,handleSubmit:d,isSubmitting:c,touched:u,values:m}=e;return(0,T.jsxs)("form",{noValidate:!0,onSubmit:d,...r,children:[(0,T.jsxs)(g.Z,{fullWidth:!0,error:Boolean(u.email&&i.email),sx:{...t.typography.customInput},children:[(0,T.jsx)(Z.Z,{htmlFor:"outlined-adornment-email-login",children:(0,T.jsx)(K.cC,{i18nKey:"user.login_username",children:B.Z.user.login_username})}),(0,T.jsx)(j.Z,{id:"outlined-adornment-email-login",type:"email",value:m.email,name:"email",onBlur:s,onChange:o,label:"Email Address / Username",inputProps:{}}),u.email&&i.email&&(0,T.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:i.email})]}),(0,T.jsxs)(g.Z,{fullWidth:!0,error:Boolean(u.password&&i.password),sx:{...t.typography.customInput},children:[(0,T.jsx)(Z.Z,{htmlFor:"outlined-adornment-password-login",children:(0,T.jsx)(K.cC,{i18nKey:"user.login_password",children:B.Z.user.login_password})}),(0,T.jsx)(j.Z,{id:"outlined-adornment-password-login",type:q?"text":"password",value:m.password,name:"password",onBlur:s,onChange:o,endAdornment:(0,T.jsx)(y.Z,{position:"end",children:(0,T.jsx)(f.Z,{"aria-label":"toggle password visibility",onClick:V,onMouseDown:J,edge:"end",size:"large",children:q?(0,T.jsx)(R.Z,{}):(0,T.jsx)(k.Z,{})})}),label:"Password",inputProps:{}}),u.password&&i.password&&(0,T.jsx)(v.Z,{error:!0,id:"standard-weight-helper-text-password-login",children:i.password})]}),(0,T.jsx)(a.Z,{direction:"row",alignItems:"center",justifyContent:"right",spacing:1,children:(0,T.jsx)(l.Z,{component:n.rU,to:"/reset",variant:"subtitle1",color:"secondary",sx:{textDecoration:"none",cursor:"pointer"},children:(0,T.jsx)(K.cC,{i18nKey:"user.login_fp",children:B.Z.user.login_fp})})}),i.submit&&(0,T.jsx)(p.Z,{sx:{mt:3},children:(0,T.jsx)(v.Z,{error:!0,children:i.submit})}),(0,T.jsx)(p.Z,{sx:{mt:2},children:(0,T.jsx)(_.Z,{children:(0,T.jsx)(x.Z,{disableElevation:!0,disabled:c,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:(0,T.jsx)(K.cC,{i18nKey:"user.login_si",children:B.Z.user.login_si})})})})]})}})]})},E=t(4904);t(9652);var W=()=>{const e=(0,i.Z)(),r=(0,s.Z)(e.breakpoints.down("md"));return(0,T.jsx)(c.Z,{children:(0,T.jsx)(o.ZP,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:(0,T.jsx)(o.ZP,{item:!0,xs:12,children:(0,T.jsx)(o.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:(0,T.jsx)(o.ZP,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:(0,T.jsx)(u.Z,{children:(0,T.jsxs)(o.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,T.jsx)(o.ZP,{item:!0,sx:{mb:3},children:(0,T.jsx)(E.Z,{})}),(0,T.jsx)(o.ZP,{item:!0,xs:12,children:(0,T.jsx)(o.ZP,{container:!0,direction:r?"column-reverse":"row",alignItems:"center",justifyContent:"center",children:(0,T.jsx)(o.ZP,{item:!0,children:(0,T.jsx)(a.Z,{alignItems:"center",justifyContent:"center",spacing:1,children:(0,T.jsx)(l.Z,{color:e.palette.secondary.main,gutterBottom:!0,variant:r?"h3":"h2",children:(0,T.jsx)(K.cC,{i18nKey:"user.login_tips1",children:B.Z.user.login_tips1})})})})})}),(0,T.jsx)(o.ZP,{item:!0,xs:12,children:(0,T.jsx)(z,{})}),(0,T.jsx)(o.ZP,{item:!0,xs:12,children:(0,T.jsx)(d.Z,{})}),(0,T.jsx)(o.ZP,{item:!0,xs:12,children:(0,T.jsx)(o.ZP,{item:!0,container:!0,direction:"column",alignItems:"center",xs:12,children:(0,T.jsx)(l.Z,{component:n.rU,to:"/register",variant:"subtitle1",sx:{textDecoration:"none"},children:(0,T.jsx)(K.cC,{i18nKey:"user.login_tosignin",children:B.Z.user.login_tosignin})})})})]})})})})})})})}}}]);
//# sourceMappingURL=417.9250ab4b.chunk.js.map